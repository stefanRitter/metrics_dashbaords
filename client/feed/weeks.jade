div(ng-controller="weeksController as vm")
  .margin-top.center
    h2.margin-top 
      a.underline.italic(href="/weeks") Weekly
      | &nbsp;&nbsp;&nbsp;
      a(href="/collections") By Collection
      | &nbsp;&nbsp;&nbsp;
      a(href="/countries") By Country
      | &nbsp;&nbsp;&nbsp;
      a(href="/ads") Ads

  table.margin-top-big
    tr
      th(ng-click="vm.changeFilter('calendarWeek')", ng-class="{'active': vm.orderFilter=='calendarWeek', 'up': vm.orderFilterDirection}") Week
      th(ng-click="vm.changeFilter('startDate')", ng-class="{'active': vm.orderFilter=='startDate', 'up': vm.orderFilterDirection}") Monday
      th(ng-click="vm.changeFilter('views')", ng-class="{'active': vm.orderFilter=='views', 'up': vm.orderFilterDirection}") Views
      th(ng-click="vm.changeFilter('users')", ng-class="{'active': vm.orderFilter=='users', 'up': vm.orderFilterDirection}") Total Users
      th(ng-click="vm.changeFilter('newUsers')", ng-class="{'active': vm.orderFilter=='newUsers', 'up': vm.orderFilterDirection}") New users
      th(ng-click="vm.changeFilter('returningUsers')", ng-class="{'active': vm.orderFilter=='returningUsers', 'up': vm.orderFilterDirection}") Returning users
      th(ng-click="vm.changeFilter('loggedinUsers')", ng-class="{'active': vm.orderFilter=='loggedinUsers', 'up': vm.orderFilterDirection}") Loggedin users
      th(ng-click="vm.changeFilter('loggedoutUsers')", ng-class="{'active': vm.orderFilter=='loggedoutUsers', 'up': vm.orderFilterDirection}") Loggedout users
      th(ng-click="vm.changeFilter('sessions')", ng-class="{'active': vm.orderFilter=='sessions', 'up': vm.orderFilterDirection}") Sessions
      th(ng-click="vm.changeFilter('pageviewsPerSession')", ng-class="{'active': vm.orderFilter=='pageviewsPerSession', 'up': vm.orderFilterDirection}") Views per session
      th(ng-click="vm.changeFilter('avgTime')", ng-class="{'active': vm.orderFilter=='avgTime', 'up': vm.orderFilterDirection}") Avg. time
      th(ng-click="vm.changeFilter('bounceRate')", ng-class="{'active': vm.orderFilter=='bounceRate', 'up': vm.orderFilterDirection}") Bounce rate
      //th(ng-click="vm.changeFilter('newEmails')", ng-class="{'active': vm.orderFilter=='newEmails', 'up': vm.orderFilterDirection}") New emails captured
      th(ng-click="vm.changeFilter('collection1')", ng-class="{'active': vm.orderFilter=='collection1', 'up': vm.orderFilterDirection}") Most read collection
      th(ng-click="vm.changeFilter('collection2')", ng-class="{'active': vm.orderFilter=='collection2', 'up': vm.orderFilterDirection}") 2. most read
      th(ng-click="vm.changeFilter('collection3')", ng-class="{'active': vm.orderFilter=='collection3', 'up': vm.orderFilterDirection}") 3. most read
      th(ng-click="vm.changeFilter('bannerTopClicks')", ng-class="{'active': vm.orderFilter=='bannerTopClicks', 'up': vm.orderFilterDirection}") Top Banner clicks
      th(ng-click="vm.changeFilter('bannerBottomClicks')", ng-class="{'active': vm.orderFilter=='bannerBottomClicks', 'up': vm.orderFilterDirection}") Bottom Banner clicks
      th(ng-click="vm.changeFilter('showMoreClicks')", ng-class="{'active': vm.orderFilter=='showMoreClicks', 'up': vm.orderFilterDirection}") More clicks
      th(ng-click="vm.changeFilter('externalClicks')", ng-class="{'active': vm.orderFilter=='externalClicks', 'up': vm.orderFilterDirection}") External clicks
      th(ng-click="vm.changeFilter('otherNavigationClicks')", ng-class="{'active': vm.orderFilter=='otherNavigationClicks', 'up': vm.orderFilterDirection}") Prev/Next clicks
      th(ng-click="vm.changeFilter('twitterfeedClick')", ng-class="{'active': vm.orderFilter=='twitterfeedClick', 'up': vm.orderFilterDirection}") twitterfeed clicks
      th(ng-click="vm.changeFilter('twitterfeedScroll')", ng-class="{'active': vm.orderFilter=='twitterfeedScroll', 'up': vm.orderFilterDirection}") twitterfeed scroll
      //th(ng-click="vm.changeFilter('comments')", ng-class="{'active': vm.orderFilter=='comments', 'up': vm.orderFilterDirection}") Comments
      //th(ng-click="vm.changeFilter('upvotes')", ng-class="{'active': vm.orderFilter=='upvotes', 'up': vm.orderFilterDirection}") Upvotes
      //th(ng-click="vm.changeFilter('bookmarks')", ng-class="{'active': vm.orderFilter=='bookmarks', 'up': vm.orderFilterDirection}") Bookmarks
      th(ng-click="vm.changeFilter('twitterShares')", ng-class="{'active': vm.orderFilter=='twitterShares', 'up': vm.orderFilterDirection}") Tweets
      th(ng-click="vm.changeFilter('facebookShares')", ng-class="{'active': vm.orderFilter=='facebookShares', 'up': vm.orderFilterDirection}") FB shares
      th(ng-click="vm.changeFilter('linkedinShares')", ng-class="{'active': vm.orderFilter=='linkedinShares', 'up': vm.orderFilterDirection}") Linkedin shares
      //th(ng-click="vm.changeFilter('sharelineShares')", ng-class="{'active': vm.orderFilter=='sharelineShares', 'up': vm.orderFilterDirection}") Share lines
    
    tr(ng-repeat="week in (vm.weeks | orderBy: vm.orderFilter:vm.orderFilterDirection)")
      td {{week.calendarWeek}}
      td(style="min-width:82px;") {{week.startDate}}
      td(style="{{vm.calcBgd('views', $index)}}") {{week.views}}
      td(style="{{vm.calcBgd('users', $index)}}") {{week.users}}
      td(style="{{vm.calcBgd('newUsers', $index)}}") {{week.newUsers}}
      td(style="{{vm.calcBgd('returningUsers', $index)}}") {{week.returningUsers}}
      td(style="{{vm.calcBgd('loggedinUsers', $index)}}") {{week.loggedinUsers}}
      td(style="{{vm.calcBgd('loggedoutUsers', $index)}}") {{week.loggedoutUsers}}
      td(style="{{vm.calcBgd('sessions', $index)}}") {{week.sessions}}
      td(style="{{vm.calcBgd('pageviewsPerSession', $index)}}") {{week.pageviewsPerSession.toFixed(2)}}
      td(style="{{vm.calcBgd('avgTime', $index)}}") {{week.avgTime | duration}}
      td(style="{{vm.calcBgd('bounceRate', $index)}}") {{week.bounceRate}}%
      //td(style="{{vm.calcBgd('newEmails', $index)}}") {{week.newEmails}}
      td
        a(href="//beta.iht.com{{week.collection1}}", target="_blank") {{vm.formatCollectionPath(week.collection1)}}
      td
        a(href="//beta.iht.com{{week.collection2}}", target="_blank") {{vm.formatCollectionPath(week.collection2)}}
      td
        a(href="//beta.iht.com{{week.collection3}}", target="_blank") {{vm.formatCollectionPath(week.collection3)}}
      td(style="{{vm.calcBgd('bannerTopClicks', $index)}}") {{week.bannerTopClicks}}
      td(style="{{vm.calcBgd('bannerBottomClicks', $index)}}") {{week.bannerBottomClicks}}
      td(style="{{vm.calcBgd('showMoreClicks', $index)}}") {{week.showMoreClicks}}
      td(style="{{vm.calcBgd('externalClicks', $index)}}") {{week.externalClicks}}
      td(style="{{vm.calcBgd('otherNavigationClicks', $index)}}") {{week.otherNavigationClicks}}
      td(style="{{vm.calcBgd('twitterfeedClick', $index)}}") {{week.twitterfeedClick}}
      td(style="{{vm.calcBgd('twitterfeedScroll', $index)}}") {{week.twitterfeedScroll}}
      //td(style="{{vm.calcBgd('comments', $index)}}") {{week.comments}}
      //td(style="{{vm.calcBgd('upvotes', $index)}}") {{week.upvotes}}
      //td(style="{{vm.calcBgd('bookmarks', $index)}}") {{week.bookmarks}}
      td(style="{{vm.calcBgd('twitterShares', $index)}}") {{week.twitterShares}}
      td(style="{{vm.calcBgd('facebookShares', $index)}}") {{week.facebookShares}}
      td(style="{{vm.calcBgd('linkedinShares', $index)}}") {{week.linkedinShares}}
      //(style="{{vm.calcBgd('sharelineShares', $index)}}") {{week.sharelineShares}}
