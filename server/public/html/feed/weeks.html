<div ng-controller="weeksController as vm"><div class="margin-top center"><h2 class="margin-top"> <a href="/weeks" class="underline italic">Weekly</a>&nbsp;&nbsp;&nbsp;<a href="/collections">By Collection</a>&nbsp;&nbsp;&nbsp;<a href="/countries">By Country</a></h2></div><table class="margin-top-big"><tr><th ng-click="vm.changeFilter('calendarWeek')" ng-class="{'active': vm.orderFilter=='calendarWeek', 'up': vm.orderFilterDirection}">Week</th><th ng-click="vm.changeFilter('startDate')" ng-class="{'active': vm.orderFilter=='startDate', 'up': vm.orderFilterDirection}">Monday</th><th ng-click="vm.changeFilter('views')" ng-class="{'active': vm.orderFilter=='views', 'up': vm.orderFilterDirection}">Views</th><th ng-click="vm.changeFilter('users')" ng-class="{'active': vm.orderFilter=='users', 'up': vm.orderFilterDirection}">Total Users</th><th ng-click="vm.changeFilter('newUsers')" ng-class="{'active': vm.orderFilter=='newUsers', 'up': vm.orderFilterDirection}">New users</th><th ng-click="vm.changeFilter('returningUsers')" ng-class="{'active': vm.orderFilter=='returningUsers', 'up': vm.orderFilterDirection}">Returning users</th><th ng-click="vm.changeFilter('loggedinUsers')" ng-class="{'active': vm.orderFilter=='loggedinUsers', 'up': vm.orderFilterDirection}">Loggedin users</th><th ng-click="vm.changeFilter('loggedoutUsers')" ng-class="{'active': vm.orderFilter=='loggedoutUsers', 'up': vm.orderFilterDirection}">Loggedout users</th><th ng-click="vm.changeFilter('sessions')" ng-class="{'active': vm.orderFilter=='sessions', 'up': vm.orderFilterDirection}">Sessions</th><th ng-click="vm.changeFilter('pageviewsPerSession')" ng-class="{'active': vm.orderFilter=='pageviewsPerSession', 'up': vm.orderFilterDirection}">Views per session</th><th ng-click="vm.changeFilter('avgTime')" ng-class="{'active': vm.orderFilter=='avgTime', 'up': vm.orderFilterDirection}">Avg. time</th><th ng-click="vm.changeFilter('bounceRate')" ng-class="{'active': vm.orderFilter=='bounceRate', 'up': vm.orderFilterDirection}">Bounce rate</th><th ng-click="vm.changeFilter('newEmails')" ng-class="{'active': vm.orderFilter=='newEmails', 'up': vm.orderFilterDirection}">New emails captured</th><th ng-click="vm.changeFilter('collection1')" ng-class="{'active': vm.orderFilter=='collection1', 'up': vm.orderFilterDirection}">Most read collection</th><th ng-click="vm.changeFilter('collection2')" ng-class="{'active': vm.orderFilter=='collection2', 'up': vm.orderFilterDirection}">2. most read</th><th ng-click="vm.changeFilter('collection3')" ng-class="{'active': vm.orderFilter=='collection3', 'up': vm.orderFilterDirection}">3. most read</th><th ng-click="vm.changeFilter('bannerClicks')" ng-class="{'active': vm.orderFilter=='bannerClicks', 'up': vm.orderFilterDirection}">Banner clicks</th><th ng-click="vm.changeFilter('bannerTopClicks')" ng-class="{'active': vm.orderFilter=='bannerTopClicks', 'up': vm.orderFilterDirection}">Top Banner clicks</th><th ng-click="vm.changeFilter('bannerBottomClicks')" ng-class="{'active': vm.orderFilter=='bannerBottomClicks', 'up': vm.orderFilterDirection}">Bottom Banner clicks</th><th ng-click="vm.changeFilter('showMoreClicks')" ng-class="{'active': vm.orderFilter=='showMoreClicks', 'up': vm.orderFilterDirection}">More clicks</th><th ng-click="vm.changeFilter('externalClicks')" ng-class="{'active': vm.orderFilter=='externalClicks', 'up': vm.orderFilterDirection}">External clicks</th><th ng-click="vm.changeFilter('otherNavigationClicks')" ng-class="{'active': vm.orderFilter=='otherNavigationClicks', 'up': vm.orderFilterDirection}">Prev/Next clicks</th><th ng-click="vm.changeFilter('mediaWallClick')" ng-class="{'active': vm.orderFilter=='mediaWallClick', 'up': vm.orderFilterDirection}">MediaWall clicks</th><th ng-click="vm.changeFilter('mediaWallScroll')" ng-class="{'active': vm.orderFilter=='mediaWallScroll', 'up': vm.orderFilterDirection}">MediaWall scroll</th><th ng-click="vm.changeFilter('mediaWall')" ng-class="{'active': vm.orderFilter=='mediaWall', 'up': vm.orderFilterDirection}">MediaWall other events</th><!--th(ng-click="vm.changeFilter('comments')", ng-class="{'active': vm.orderFilter=='comments', 'up': vm.orderFilterDirection}") Comments--><!--th(ng-click="vm.changeFilter('upvotes')", ng-class="{'active': vm.orderFilter=='upvotes', 'up': vm.orderFilterDirection}") Upvotes--><!--th(ng-click="vm.changeFilter('bookmarks')", ng-class="{'active': vm.orderFilter=='bookmarks', 'up': vm.orderFilterDirection}") Bookmarks--><th ng-click="vm.changeFilter('twitterShares')" ng-class="{'active': vm.orderFilter=='twitterShares', 'up': vm.orderFilterDirection}">Tweets</th><th ng-click="vm.changeFilter('facebookShares')" ng-class="{'active': vm.orderFilter=='facebookShares', 'up': vm.orderFilterDirection}">FB shares</th><th ng-click="vm.changeFilter('linkedinShares')" ng-class="{'active': vm.orderFilter=='linkedinShares', 'up': vm.orderFilterDirection}">Linkedin shares</th><!--th(ng-click="vm.changeFilter('sharelineShares')", ng-class="{'active': vm.orderFilter=='sharelineShares', 'up': vm.orderFilterDirection}") Share lines--></tr><tr ng-repeat="week in (vm.weeks | orderBy: vm.orderFilter:vm.orderFilterDirection)"><td>{{week.calendarWeek}}</td><td style="min-width:82px;">{{week.startDate}}</td><td style="{{vm.calcBgd('views', $index)}}">{{week.views}}</td><td style="{{vm.calcBgd('users', $index)}}">{{week.users}}</td><td style="{{vm.calcBgd('newUsers', $index)}}">{{week.newUsers}}</td><td style="{{vm.calcBgd('returningUsers', $index)}}">{{week.returningUsers}}</td><td style="{{vm.calcBgd('loggedinUsers', $index)}}">{{week.loggedinUsers}}</td><td style="{{vm.calcBgd('loggedoutUsers', $index)}}">{{week.loggedoutUsers}}</td><td style="{{vm.calcBgd('sessions', $index)}}">{{week.sessions}}</td><td style="{{vm.calcBgd('pageviewsPerSession', $index)}}">{{week.pageviewsPerSession.toFixed(2)}}</td><td style="{{vm.calcBgd('avgTime', $index)}}">{{week.avgTime | duration}}</td><td style="{{vm.calcBgd('bounceRate', $index)}}">{{week.bounceRate}}%</td><td style="{{vm.calcBgd('newEmails', $index)}}">{{week.newEmails}}</td><td><a href="//beta.iht.com{{week.collection1}}" target="_blank">{{vm.formatCollectionPath(week.collection1)}}</a></td><td><a href="//beta.iht.com{{week.collection2}}" target="_blank">{{vm.formatCollectionPath(week.collection2)}}</a></td><td><a href="//beta.iht.com{{week.collection3}}" target="_blank">{{vm.formatCollectionPath(week.collection3)}}</a></td><td style="{{vm.calcBgd('bannerClicks', $index)}}">{{week.bannerClicks}}</td><td style="{{vm.calcBgd('bannerTopClicks', $index)}}">{{week.bannerTopClicks}}</td><td style="{{vm.calcBgd('bannerBottomClicks', $index)}}">{{week.bannerBottomClicks}}</td><td style="{{vm.calcBgd('showMoreClicks', $index)}}">{{week.showMoreClicks}}</td><td style="{{vm.calcBgd('externalClicks', $index)}}">{{week.externalClicks}}</td><td style="{{vm.calcBgd('otherNavigationClicks', $index)}}">{{week.otherNavigationClicks}}</td><td style="{{vm.calcBgd('mediaWallClick', $index)}}">{{week.mediaWallClick}}</td><td style="{{vm.calcBgd('mediaWallScroll', $index)}}">{{week.mediaWallScroll}}</td><td style="{{vm.calcBgd('mediaWallScroll', $index)}}">{{week.mediaWall}}</td><!--td(style="{{vm.calcBgd('comments', $index)}}") {{week.comments}}--><!--td(style="{{vm.calcBgd('upvotes', $index)}}") {{week.upvotes}}--><!--td(style="{{vm.calcBgd('bookmarks', $index)}}") {{week.bookmarks}}--><td style="{{vm.calcBgd('twitterShares', $index)}}">{{week.twitterShares}}</td><td style="{{vm.calcBgd('facebookShares', $index)}}">{{week.facebookShares}}</td><td style="{{vm.calcBgd('linkedinShares', $index)}}">{{week.linkedinShares}}</td><!--(style="{{vm.calcBgd('sharelineShares', $index)}}") {{week.sharelineShares}}--></tr></table></div>